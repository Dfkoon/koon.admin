import{i as E,b as W,j as e,u as B,p as A,s as M,d as I,e as _,f as m,r as b,B as i,T as c,I as y,C as T,A as L,o as q,t as P,h as N,v as G,P as H,z}from"./index-DiJP0-9s.js";import{d as O,a as V}from"./Refresh-DCOeZUIP.js";import{d as Y}from"./Person-BavuKjIp.js";import{d as F}from"./AccessTime-HHnC3-Xg.js";import{d as J}from"./Message-qqwpr3rL.js";import{C as p}from"./Chip-BhGZD8wh.js";var $={},K=E;Object.defineProperty($,"__esModule",{value:!0});var k=$.default=void 0,Q=K(W()),U=e;k=$.default=(0,Q.default)((0,U.jsx)("path",{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11"}),"Reply");const C={async getAllSuggestions(){try{const r=(await I(_(m,"qna"))).docs.map(s=>({id:s.id,source:"qna",...s.data(),text:s.data().message||s.data().text||s.data().content||s.data().quote||""})),f=(await I(_(m,"suggestions"))).docs.map(s=>({id:s.id,source:"suggestions",...s.data(),text:s.data().message||s.data().text||s.data().content||s.data().quote||""}));return[...r,...f].sort((s,x)=>{var u,j;const n=(u=s.createdAt)!=null&&u.toDate?s.createdAt.toDate():new Date(s.createdAt);return((j=x.createdAt)!=null&&j.toDate?x.createdAt.toDate():new Date(x.createdAt))-n})}catch(l){return console.error("Error fetching suggestions:",l),[]}},async deleteSuggestion(l,r="qna"){await M(A(m,r,l))},async togglePublicStatus(l,r,g="qna"){await B(A(m,g,l),{isPublic:r})}};function ie(){const[l,r]=b.useState([]),[g,f]=b.useState(!0),[d,s]=b.useState(null),x={complaint:{label:"Ø´ÙƒÙˆÙ‰",color:"#d32f2f",emoji:"âš ï¸"},suggestion:{label:"Ø§Ù‚ØªØ±Ø§Ø­ ØªØ­Ø³ÙŠÙ†",color:"#1976d2",emoji:"ğŸ’¡"},technical:{label:"Ù…Ø´ÙƒÙ„Ø© ØªÙ‚Ù†ÙŠØ©",color:"#f57c00",emoji:"ğŸ”§"},thanks:{label:"Ø´ÙƒØ±ÙŠ",color:"#388e3c",emoji:"â¤ï¸"},other:{label:"Ø£Ø®Ø±Ù‰",color:"#757575",emoji:"ğŸ“"}},n=t=>x[t]||x.other,v=t=>{if(!t)return"Ø¨Ø¯ÙˆÙ† ØªØ§Ø±ÙŠØ®";try{if(t.toDate)return t.toDate().toLocaleString("ar-EG");const o=new Date(t);return isNaN(o.getTime())?"ØªØ§Ø±ÙŠØ® ØºÙŠØ± ØµØ§Ù„Ø­":o.toLocaleString("ar-EG")}catch{return"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ§Ø±ÙŠØ®"}},u=async()=>{f(!0);const t=await C.getAllSuggestions();r(t),f(!1)};b.useEffect(()=>{u()},[]);const j=async(t,o,h)=>{t.stopPropagation(),window.confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ")&&(await C.deleteSuggestion(o,h),z.success("ØªÙ… Ø§Ù„Ø­Ø°Ù Ø¨Ù†Ø¬Ø§Ø­"),r(S=>S.filter(w=>w.id!==o)),d===o&&s(null))},R=async(t,o,h,S)=>{t.stopPropagation(),await C.togglePublicStatus(o,!h,S),z.success(h?"ØªÙ… Ø§Ù„Ø¥Ø®ÙØ§Ø¡":"ØªÙ… Ø§Ù„Ù†Ø´Ø±"),r(w=>w.map(D=>D.id===o?{...D,isPublic:!h}:D))},a=l.find(t=>t.id===d);return e.jsxs(i,{sx:{height:"calc(100vh - 100px)",display:"flex",gap:3},children:[e.jsxs(i,{className:"glass-panel",sx:{width:{xs:"100%",md:"350px"},display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs(i,{sx:{p:2,display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid var(--glass-border)"},children:[e.jsx(c,{variant:"h6",fontWeight:"bold",children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„ÙˆØ§Ø±Ø¯"}),e.jsx(y,{size:"small",onClick:u,children:e.jsx(O,{})})]}),e.jsx(i,{sx:{flex:1,overflowY:"auto",p:2},children:g?e.jsx(i,{display:"flex",justifyContent:"center",mt:4,children:e.jsx(T,{size:30})}):e.jsx(L,{children:l.map((t,o)=>e.jsx(q.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:o*.05},onClick:()=>s(t.id),children:e.jsxs(i,{sx:{p:2,mb:1.5,borderRadius:"16px",background:d===t.id?"rgba(211, 47, 47, 0.15)":"rgba(255,255,255,0.03)",border:d===t.id?"1px solid var(--primary)":"1px solid transparent",cursor:"pointer","&:hover":{background:"rgba(255,255,255,0.05)"}},children:[e.jsxs(i,{display:"flex",justifyContent:"space-between",mb:1,children:[e.jsx(c,{variant:"subtitle2",fontWeight:"bold",children:t.name||"Ù…Ø¬Ù‡ÙˆÙ„"}),e.jsx(c,{variant:"caption",color:"text.secondary",children:v(t.createdAt)})]}),e.jsx(c,{variant:"body2",color:"text.secondary",noWrap:!0,children:t.text}),e.jsxs(i,{mt:1,display:"flex",gap:1,children:[e.jsx(p,{label:`${n(t.type).emoji} ${n(t.type).label}`,size:"small",sx:{height:20,fontSize:"0.7rem",bgcolor:n(t.type).color,color:"white"}}),t.isPublic&&e.jsx(p,{label:"Ù…Ù†Ø´ÙˆØ±",size:"small",color:"success",sx:{height:20,fontSize:"0.7rem"}})]})]})},t.id))})})]}),e.jsx(i,{className:"glass-panel",sx:{flex:1,p:4,display:{xs:d?"block":"none",md:"block"},position:"relative"},children:a?e.jsxs(q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:[e.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:4,children:[e.jsxs(i,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(i,{sx:{width:50,height:50,borderRadius:"50%",bgcolor:"rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Y,{fontSize:"large",color:"primary"})}),e.jsxs(i,{children:[e.jsx(c,{variant:"h5",fontWeight:"bold",children:a.name||"ÙØ§Ø¹Ù„ Ø®ÙŠØ±"}),e.jsxs(i,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(F,{fontSize:"small",sx:{color:"text.secondary",fontSize:16}}),e.jsx(c,{variant:"body2",color:"text.secondary",children:v(a.createdAt)})]})]})]}),e.jsxs(i,{display:"flex",gap:1,children:[e.jsx(P,{title:a.isPublic?"Ø¥Ø®ÙØ§Ø¡":"Ù†Ø´Ø±",children:e.jsx(y,{onClick:t=>R(t,a.id,a.isPublic,a.source),color:a.isPublic?"success":"default",children:a.isPublic?e.jsx(N,{}):e.jsx(G,{})})}),e.jsx(P,{title:"Ø±Ø¯ (WhatsApp)",children:e.jsx(y,{color:"primary",onClick:()=>window.open(`https://wa.me/?text=Ø±Ø¯ Ø¹Ù„Ù‰ Ø±Ø³Ø§Ù„ØªÙƒ: ${a.text}`,"_blank"),children:e.jsx(k,{})})}),e.jsx(P,{title:"Ø­Ø°Ù",children:e.jsx(y,{color:"error",onClick:t=>j(t,a.id,a.source),children:e.jsx(V,{})})})]})]}),e.jsx(i,{mb:3,children:e.jsx(p,{label:`${n(a.type).emoji} ${n(a.type).label}`,sx:{bgcolor:n(a.type).color,color:"white",fontWeight:"bold",fontSize:"0.9rem",px:2,py:2.5}})}),e.jsx(H,{elevation:0,sx:{p:3,bgcolor:"rgba(255,255,255,0.03)",borderRadius:"20px",border:"1px solid rgba(255,255,255,0.1)",minHeight:"200px"},children:e.jsxs(c,{variant:"h6",sx:{lineHeight:1.8,color:"white"},children:['"',a.text,'"']})}),e.jsxs(i,{mt:3,display:"flex",gap:2,flexWrap:"wrap",children:[a.email&&e.jsx(p,{label:`Email: ${a.email}`,variant:"outlined"}),a.phone&&e.jsx(p,{label:`Phone: ${a.phone}`,variant:"outlined"}),e.jsx(p,{label:`Source: ${a.source}`,variant:"outlined",color:"primary"})]})]},a.id):e.jsxs(i,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"text.secondary",children:[e.jsx(J,{sx:{fontSize:80,opacity:.2,mb:2}}),e.jsx(c,{variant:"h6",children:"Ø§Ø®ØªØ± Ø±Ø³Ø§Ù„Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„"})]})})]})}export{ie as default};
