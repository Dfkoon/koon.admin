import{r as d,o as h,p as m,s as v,_ as C,t as p,j as o,v as T,b as j,x as R,y as f,D as X,E as q,F as H,c as G,k as K,i as Q,d as Y,e as Z,f as P,B as y,T as ee,C as te,m as oe,P as ae,l as se,I as re,z as ne}from"./index-lLoRZLC4.js";import{F as le}from"./Fab-Bpnqvdiy.js";import{R as ie,C as ce,D as de}from"./Refresh-CAvzPmV0.js";const V=d.createContext();function pe(e){return h("MuiTable",e)}m("MuiTable",["root","stickyHeader"]);const ue=["className","component","padding","size","stickyHeader"],xe=e=>{const{classes:t,stickyHeader:a}=e;return R({root:["root",a&&"stickyHeader"]},pe,t)},ge=T("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>p({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":p({},e.typography.body2,{padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},t.stickyHeader&&{borderCollapse:"separate"})),_="table",be=d.forwardRef(function(t,a){const s=v({props:t,name:"MuiTable"}),{className:i,component:n=_,padding:r="normal",size:l="medium",stickyHeader:c=!1}=s,g=C(s,ue),x=p({},s,{component:n,padding:r,size:l,stickyHeader:c}),M=xe(x),D=d.useMemo(()=>({padding:r,size:l,stickyHeader:c}),[r,l,c]);return o.jsx(V.Provider,{value:D,children:o.jsx(ge,p({as:n,role:n===_?null:"table",ref:a,className:j(M.root,i),ownerState:x},g))})}),z=d.createContext();function ye(e){return h("MuiTableBody",e)}m("MuiTableBody",["root"]);const fe=["className","component"],he=e=>{const{classes:t}=e;return R({root:["root"]},ye,t)},me=T("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),ve={variant:"body"},B="tbody",Ce=d.forwardRef(function(t,a){const s=v({props:t,name:"MuiTableBody"}),{className:i,component:n=B}=s,r=C(s,fe),l=p({},s,{component:n}),c=he(l);return o.jsx(z.Provider,{value:ve,children:o.jsx(me,p({className:j(c.root,i),as:n,ref:a,role:n===B?null:"rowgroup",ownerState:l},r))})});function Te(e){return h("MuiTableCell",e)}const je=m("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),Re=["align","className","component","padding","scope","size","sortDirection","variant"],Me=e=>{const{classes:t,variant:a,align:s,padding:i,size:n,stickyHeader:r}=e,l={root:["root",a,r&&"stickyHeader",s!=="inherit"&&`align${f(s)}`,i!=="normal"&&`padding${f(i)}`,`size${f(n)}`]};return R(l,Te,t)},we=T("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`size${f(a.size)}`],a.padding!=="normal"&&t[`padding${f(a.padding)}`],a.align!=="inherit"&&t[`align${f(a.align)}`],a.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>p({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${e.palette.mode==="light"?X(H(e.palette.divider,1),.88):q(H(e.palette.divider,1),.68)}`,textAlign:"left",padding:16},t.variant==="head"&&{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},t.variant==="body"&&{color:(e.vars||e).palette.text.primary},t.variant==="footer"&&{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},t.size==="small"&&{padding:"6px 16px",[`&.${je.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},t.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},t.padding==="none"&&{padding:0},t.align==="left"&&{textAlign:"left"},t.align==="center"&&{textAlign:"center"},t.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},t.align==="justify"&&{textAlign:"justify"},t.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default})),u=d.forwardRef(function(t,a){const s=v({props:t,name:"MuiTableCell"}),{align:i="inherit",className:n,component:r,padding:l,scope:c,size:g,sortDirection:x,variant:M}=s,D=C(s,Re),b=d.useContext(V),k=d.useContext(z),N=k&&k.variant==="head";let w;r?w=r:w=N?"th":"td";let $=c;w==="td"?$=void 0:!$&&N&&($="col");const A=M||k&&k.variant,U=p({},s,{align:i,component:w,padding:l||(b&&b.padding?b.padding:"normal"),size:g||(b&&b.size?b.size:"medium"),sortDirection:x,stickyHeader:A==="head"&&b&&b.stickyHeader,variant:A}),J=Me(U);let I=null;return x&&(I=x==="asc"?"ascending":"descending"),o.jsx(we,p({as:w,ref:a,className:j(J.root,n),"aria-sort":I,scope:$,ownerState:U},D))});function ke(e){return h("MuiTableContainer",e)}m("MuiTableContainer",["root"]);const $e=["className","component"],He=e=>{const{classes:t}=e;return R({root:["root"]},ke,t)},ze=T("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),De=d.forwardRef(function(t,a){const s=v({props:t,name:"MuiTableContainer"}),{className:i,component:n="div"}=s,r=C(s,$e),l=p({},s,{component:n}),c=He(l);return o.jsx(ze,p({ref:a,as:n,className:j(c.root,i),ownerState:l},r))});function Ne(e){return h("MuiTableHead",e)}m("MuiTableHead",["root"]);const Ae=["className","component"],Ue=e=>{const{classes:t}=e;return R({root:["root"]},Ne,t)},Ie=T("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),Pe={variant:"head"},S="thead",_e=d.forwardRef(function(t,a){const s=v({props:t,name:"MuiTableHead"}),{className:i,component:n=S}=s,r=C(s,Ae),l=p({},s,{component:n}),c=Ue(l);return o.jsx(z.Provider,{value:Pe,children:o.jsx(Ie,p({as:n,className:j(c.root,i),ref:a,role:n===S?null:"rowgroup",ownerState:l},r))})});function Be(e){return h("MuiTableRow",e)}const L=m("MuiTableRow",["root","selected","hover","head","footer"]),Se=["className","component","hover","selected"],Le=e=>{const{classes:t,selected:a,hover:s,head:i,footer:n}=e;return R({root:["root",a&&"selected",s&&"hover",i&&"head",n&&"footer"]},Be,t)},Ee=T("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.head&&t.head,a.footer&&t.footer]}})(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${L.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${L.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:H(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:H(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}})),E="tr",O=d.forwardRef(function(t,a){const s=v({props:t,name:"MuiTableRow"}),{className:i,component:n=E,hover:r=!1,selected:l=!1}=s,c=C(s,Se),g=d.useContext(z),x=p({},s,{component:n,hover:r,selected:l,head:g&&g.variant==="head",footer:g&&g.variant==="footer"}),M=Le(x);return o.jsx(Ee,p({as:n,ref:a,className:j(M.root,i),role:n===E?null:"row",ownerState:x},c))}),Oe=G(o.jsx("path",{d:"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm7 7V3.5L18.5 9z"}),"InsertDriveFile"),W="materialDonations",F={async getAllMaterials(){try{return(await Y(Z(P,W))).docs.map(t=>{var a;return{id:t.id,...t.data(),createdAt:(a=t.data().timestamp)!=null&&a.toDate?t.data().timestamp.toDate():t.data().createdAt?t.data().createdAt.toDate?t.data().createdAt.toDate():new Date(t.data().createdAt):new Date}}).sort((t,a)=>a.createdAt-t.createdAt)}catch(e){return console.error("Error fetching materials:",e),[]}},async deleteMaterial(e){await K(Q(P,W,e))}};function Je(){const[e,t]=d.useState([]),[a,s]=d.useState(!0),i=async()=>{s(!0);const r=await F.getAllMaterials();t(r),s(!1)};d.useEffect(()=>{i()},[]);const n=async r=>{window.confirm("هل أنت متأكد من الحذف؟")&&(await F.deleteMaterial(r),ne.success("تم الحذف"),t(l=>l.filter(c=>c.id!==r)))};return o.jsxs(y,{children:[o.jsxs(y,{sx:{mb:4,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx(ee,{variant:"h4",fontWeight:"bold",children:"تبادل المواد"}),o.jsx(le,{color:"primary",size:"small",onClick:i,children:o.jsx(ie,{})})]}),a?o.jsx(y,{display:"flex",justifyContent:"center",mt:10,children:o.jsx(te,{})}):o.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[o.jsx(De,{component:ae,className:"glass-panel",sx:{background:"transparent",boxShadow:"none"},children:o.jsxs(be,{sx:{minWidth:650},children:[o.jsx(_e,{children:o.jsxs(O,{children:[o.jsx(u,{sx:{color:"text.secondary"},children:"اسم المادة"}),o.jsx(u,{sx:{color:"text.secondary"},children:"الوصف"}),o.jsx(u,{sx:{color:"text.secondary"},children:"معلومات التواصل"}),o.jsx(u,{sx:{color:"text.secondary"},children:"التاريخ"}),o.jsx(u,{sx:{color:"text.secondary"},children:"إجراءات"})]})}),o.jsx(Ce,{children:e.map((r,l)=>o.jsxs(O,{sx:{"&:last-child td, &:last-child th":{border:0},bgcolor:l%2===0?"rgba(255,255,255,0.02)":"transparent","&:hover":{bgcolor:"rgba(211, 47, 47, 0.05)"}},children:[o.jsx(u,{component:"th",scope:"row",sx:{color:"white",fontWeight:"bold"},children:o.jsxs(y,{display:"flex",alignItems:"center",gap:2,children:[o.jsx(Oe,{color:"primary"}),r.itemName]})}),o.jsx(u,{sx:{color:"rgba(255,255,255,0.7)"},children:r.description||"لا يوجد وصف"}),o.jsx(u,{children:o.jsx(y,{display:"flex",flexDirection:"column",gap:.5,children:r.contactInfo&&o.jsx(ce,{label:r.contactInfo,size:"small",variant:"outlined",sx:{color:"white",borderColor:"rgba(255,255,255,0.2)"}})})}),o.jsx(u,{sx:{color:"rgba(255,255,255,0.7)"},children:new Date(r.createdAt).toLocaleDateString()}),o.jsx(u,{children:o.jsx(se,{title:"حذف",children:o.jsx(re,{color:"error",onClick:()=>n(r.id),children:o.jsx(de,{})})})})]},r.id))})]})}),e.length===0&&o.jsx(y,{textAlign:"center",py:5,color:"text.secondary",children:"لا توجد مواد مضافة حالياً"})]})]})}export{Je as default};
